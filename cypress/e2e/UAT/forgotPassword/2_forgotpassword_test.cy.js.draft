import loginPage from '../../../pageObjects/LoginPage'
import forgotPasswordPage from '../../../pageObjects/ForgotPasswordPage'

describe('Forgot Password Feature', () => {

    beforeEach(() => {
        loginPage.visit()
        loginPage.getForgotPasswordLink().click()
      })
    
      it('[POSITIVE✅] Navigates to Forgot Password page when user clicks on link', () => {
        cy.url().should('include', '/forgot-password')
        forgotPasswordPage.getEmailInput().should('be.visible')
      })
    
      it('[NEGATIVE❌] Shows error message if email is empty and user clicks Send reset link', () => {
        forgotPasswordPage.getSendResetLinkButton().click()
        forgotPasswordPage.getEmptyEmailError().should('contain.text', 'Email address is required')
      })
    
      it('[NEGATIVE❌] Shows error message for invalid email format', () => {
        forgotPasswordPage.getEmailInput().type('invalidEmail')
        forgotPasswordPage.getSendResetLinkButton().click()
        forgotPasswordPage.getInvalidEmailError().should('contain.text', 'Please enter a valid email address')
      })
    
      it('[POSITIVE✅] Shows success message if valid email format entered', () => {
        forgotPasswordPage.getEmailInput().clear().type('mail@mail')
        forgotPasswordPage.getSendResetLinkButton().click()
        forgotPasswordPage.getSuccessMessage().should('be.visible')
      })
    
      it('[POSITIVE✅] Return to sign in navigates back to login page', () => {
        forgotPasswordPage.getReturnToSignInLink().click()
        cy.url().should('include', '/sign-in')
      })
})